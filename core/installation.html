
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; PADOCC Package v1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=3dd8cc91"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PADOCC Command Line Tool" href="cli.html" />
    <link rel="prev" title="Inspiration for Cloud Formats and Aggregations" href="inspiration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PADOCC Package
              <img src="../_static/padocc_wt.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="inspiration.html">Inspiration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pip-installation">pip installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-from-source">Install from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-git-clone-the-repository">Step 1: Git clone the repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-set-up-virtual-environment">Step 2: Set up Virtual Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#environment-configuration">Environment configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#assembling-pipeline-inputs">Assembling Pipeline Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-pipeline-cli">Running the pipeline CLI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive Notebook/Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="extras.html">Extra Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex_operation.html">Complex (Parallel) Operation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operations:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operations/projects.html">The Project Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/groups.html">The Group Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/mixins.html">Core Mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/shepard.html">SHEPARD</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">PADOCC API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../source_code/project_source.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_code/group_source.html">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_code/phase_source.html">Phases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_code/misc_source.html">Filehandlers, Logs, and Utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PADOCC Package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/core/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ensure you have local modules enabled such that you have python 3.x installed in your local environment. A version of the pipeline source code exists at <code class="docutils literal notranslate"><span class="pre">/gws/nopw/j04/cedaproc/padocc</span></code> so for CEDA staff please see if this can be used before cloning the repository elsewhere.</p>
</div>
<section id="pip-installation">
<h2>pip installation<a class="headerlink" href="#pip-installation" title="Permalink to this heading"></a></h2>
<p>As of version 1.3, padocc is now a package on pypi! This means you can simply install with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">padocc</span></code>. If you need to install from the source (e.g to access test data) please see below.</p>
</section>
<section id="install-from-source">
<h2>Install from source<a class="headerlink" href="#install-from-source" title="Permalink to this heading"></a></h2>
<section id="step-1-git-clone-the-repository">
<h3>Step 1: Git clone the repository<a class="headerlink" href="#step-1-git-clone-the-repository" title="Permalink to this heading"></a></h3>
<p>If you need to clone the repository, either simply clone the main branch of the repository (no branch specified) or check the latest version of the repository at github.com/cedadev/padocc, which you can clone using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">cedadev</span><span class="o">/</span><span class="n">padocc</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The instructions below are specific to version 1.3 and later. To obtain documentation for pre-1.3, please contact <a class="reference external" href="mailto:daniel&#46;westwood&#37;&#52;&#48;stfc&#46;ac&#46;uk">daniel<span>&#46;</span>westwood<span>&#64;</span>stfc<span>&#46;</span>ac<span>&#46;</span>uk</a>.</p>
</div>
</section>
<section id="step-2-set-up-virtual-environment">
<h3>Step 2: Set up Virtual Environment<a class="headerlink" href="#step-2-set-up-virtual-environment" title="Permalink to this heading"></a></h3>
<p>Step 2 is to create a virtual environment and install the necessary packages with pip. This can be done inside the local repo you’ve cloned as <code class="docutils literal notranslate"><span class="pre">local</span></code> or <code class="docutils literal notranslate"><span class="pre">kvenv</span></code> which will be ignored by the repository, or you can create a venv elsewhere in your home directory i.e <code class="docutils literal notranslate"><span class="pre">~/venvs/build_venv</span></code>. If you are using the pipeline version in <code class="docutils literal notranslate"><span class="pre">cedaproc</span></code> there should already be a virtual environment set up.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m venv name_of_venv;</span>
<span class="go">source name_of_venv/bin/activate;</span>
<span class="go">pip install ./;</span>
</pre></div>
</div>
</section>
</section>
<section id="environment-configuration">
<h2>Environment configuration<a class="headerlink" href="#environment-configuration" title="Permalink to this heading"></a></h2>
<p>Create a config file to set necessary environment variables. (Suggested to place these in the local <cite>config/</cite> folder as this will be ignored by git). Eg:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export WORKDIR = /path/to/kerchunk-pipeline</span>
</pre></div>
</div>
<p>Now you should be set up to run the pipeline properly.</p>
</section>
<section id="assembling-pipeline-inputs">
<h2>Assembling Pipeline Inputs<a class="headerlink" href="#assembling-pipeline-inputs" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>In order to successfully run the pipeline you need the following input files:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>An input csv file with an entry for each dataset with fields:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">project_code,</span> <span class="pre">pattern/filename,</span> <span class="pre">updates*,</span> <span class="pre">removals*</span></code></p></li>
<li><p>If a pattern is not known or cannot be expressed, the path to a file containing a list of paths to all the NetCDF files can be used instead.</p></li>
<li><p>updates and removals should be paths to json files which contain information on global metadata replacements. An example can be found below.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>It is also helpful to create a setup/config bash script to set all your environment variables which include:</dt><dd><ul class="simple">
<li><p>WORKDIR: The working directory for the pipeline (where to store all the cache files)</p></li>
</ul>
</dd>
</dl>
</section>
<section id="running-the-pipeline-cli">
<h2>Running the pipeline CLI<a class="headerlink" href="#running-the-pipeline-cli" title="Permalink to this heading"></a></h2>
<p>See the section around using the CLI tool for more details. This is a brief introduction to how to run the CLI tool.</p>
<p>Some useful option/flags to add:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">v</span> <span class="c1"># Verbose</span>
   <span class="c1">#  - add multiple v&#39;s for debug messages</span>
<span class="o">-</span><span class="n">f</span> <span class="c1"># Forceful</span>
   <span class="c1">#  - perform step even if output file already exists</span>
<span class="o">-</span><span class="n">b</span> <span class="c1"># Bypass</span>
   <span class="c1"># See bypass section in pipeline flags explained.</span>
<span class="o">-</span><span class="n">r</span> <span class="c1"># repeat_id</span>
   <span class="c1">#  - default uses main, if you have created repeat_ids manually or with assess.py, specify here.</span>
<span class="o">-</span><span class="n">d</span> <span class="c1"># dryrun</span>
   <span class="c1">#  - Skip creating any new files in this phase</span>
</pre></div>
</div>
<p>The pipeline is now run using the entrypoint script <code class="docutils literal notranslate"><span class="pre">padocc</span></code> as a command-line interface (CLI) tool.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4.1 Initialise from your CSV file:</span>
<span class="n">padocc</span> <span class="n">init</span> <span class="o">-</span><span class="n">G</span> <span class="o">&lt;</span><span class="n">group_name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">i</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">csv</span>

<span class="c1"># 4.2 Perform scanning of netcdf files:</span>
<span class="n">padocc</span> <span class="n">scan</span> <span class="o">-</span><span class="n">G</span> <span class="o">&lt;</span><span class="n">group_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Jasmin users with SLURM access, you should check after every <code class="docutils literal notranslate"><span class="pre">scan</span></code>, <code class="docutils literal notranslate"><span class="pre">compute</span></code> and <code class="docutils literal notranslate"><span class="pre">validate</span></code> that your SLURM jobs are running properly:</p>
<p><code class="docutils literal notranslate"><span class="pre">squeue</span> <span class="pre">-u</span> <span class="pre">&lt;jasmin_username&gt;</span></code></p>
<p>And once the SLURM jobs are complete you should check error logs to see which jobs were successful and which failed for different reasons. See the Interactive section for how to check status and logs of projects in the pipeline.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="inspiration.html" class="btn btn-neutral float-left" title="Inspiration for Cloud Formats and Aggregations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="PADOCC Command Line Tool" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, Centre of Environmental Data Analysis Developers,Scientific and Technical Facilities Council (STFC),UK Research and Innovation (UKRI). BSD 2-Clause License. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #e92603;
    }

    .caption-text, .header h1 {
        color: #ef4d5a
    }

    .note {
        background: #BEEF9E
    }
    .admonition-title {
        background: #335145
    }

    .wy-nav-side {
        background: #001711;
    }

  </style>


</body>
</html>